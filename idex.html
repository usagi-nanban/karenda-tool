<script language=javascript>document.write(unescape('%3C%21DOCTYPE%20html%3E%0A%3Chtml%20lang%3D%22ja%22%3E%0A%3Chead%3E%0A%20%20%3Cmeta%20charset%3D%22UTF-8%22%20/%3E%0A%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%22%20/%3E%0A%20%20%3Ctitle%3E%u30DF%u30C3%u30B7%u30E7%u30F3%u9054%u6210%u8868%3C/title%3E%0A%20%20%3Cstyle%3E%0A%20%20%20%20body%20%7B%20font-family%3A%20sans-serif%3B%20margin%3A%200%3B%20padding%3A%200%3B%20%7D%0A%20%20%20%20header%20%7B%20background%3A%20%23007bff%3B%20color%3A%20white%3B%20padding%3A%201rem%3B%20text-align%3A%20center%3B%20%7D%0A%20%20%20%20%23room-form%2C%20%23create-room-form%2C%20%23mission-form%20%7B%20margin%3A%201rem%3B%20%7D%0A%20%20%20%20table%20%7B%20width%3A%20100%25%3B%20border-collapse%3A%20collapse%3B%20margin%3A%201rem%3B%20%7D%0A%20%20%20%20th%2C%20td%20%7B%20border%3A%201px%20solid%20%23ccc%3B%20padding%3A%200.5rem%3B%20text-align%3A%20center%3B%20%7D%0A%20%20%20%20input%5Btype%3D%22text%22%5D%2C%20textarea%20%7B%20width%3A%20100%25%3B%20box-sizing%3A%20border-box%3B%20%7D%0A%20%20%20%20%23gm-check%20%7B%20margin%3A%201rem%3B%20%7D%0A%20%20%20%20@media%20%28max-width%3A%20600px%29%20%7B%0A%20%20%20%20%20%20table%2C%20thead%2C%20tbody%2C%20th%2C%20td%2C%20tr%20%7B%20display%3A%20block%3B%20%7D%0A%20%20%20%20%20%20th%2C%20td%20%7B%20text-align%3A%20left%3B%20%7D%0A%20%20%20%20%7D%0A%20%20%3C/style%3E%0A%20%20%3Cscript%20type%3D%22module%22%3E%0A%20%20%20%20import%20%7B%20initializeApp%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/10.12.2/firebase-app.js%22%3B%0A%20%20%20%20import%20%7B%20getDatabase%2C%20ref%2C%20onValue%2C%20set%2C%20push%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/10.12.2/firebase-database.js%22%3B%0A%0A%20%20%20%20const%20firebaseConfig%20%3D%20%7B%0A%20%20%20%20%20%20apiKey%3A%20%22AIzaSyAGdjCbmeZtWTUJJbzM0tvoudyMCGGL1GU%22%2C%0A%20%20%20%20%20%20authDomain%3A%20%22mission-table.firebaseapp.com%22%2C%0A%20%20%20%20%20%20databaseURL%3A%20%22https%3A//mission-table-default-rtdb.firebaseio.com%22%2C%0A%20%20%20%20%20%20projectId%3A%20%22mission-table%22%2C%0A%20%20%20%20%20%20storageBucket%3A%20%22mission-table.firebasestorage.app%22%2C%0A%20%20%20%20%20%20messagingSenderId%3A%20%22737931554597%22%2C%0A%20%20%20%20%20%20appId%3A%20%221%3A737931554597%3Aweb%3Aa610bd628d649a2ef0b4cc%22%2C%0A%20%20%20%20%20%20measurementId%3A%20%22G-4LKWG7R50S%22%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20const%20app%20%3D%20initializeApp%28firebaseConfig%29%3B%0A%20%20%20%20const%20db%20%3D%20getDatabase%28app%29%3B%0A%0A%20%20%20%20let%20roomCode%20%3D%20%22%22%3B%0A%0A%20%20%20%20const%20gmCheck%20%3D%20document.getElementById%28%22gm-checkbox%22%29%3B%0A%0A%20%20%20%20document.getElementById%28%22room-form%22%29.addEventListener%28%22submit%22%2C%20e%20%3D%3E%20%7B%0A%20%20%20%20%20%20e.preventDefault%28%29%3B%0A%20%20%20%20%20%20roomCode%20%3D%20document.getElementById%28%22room-code%22%29.value%3B%0A%20%20%20%20%20%20loadRoom%28%29%3B%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20document.getElementById%28%22create-room-form%22%29.addEventListener%28%22submit%22%2C%20e%20%3D%3E%20%7B%0A%20%20%20%20%20%20e.preventDefault%28%29%3B%0A%20%20%20%20%20%20const%20newRoomRef%20%3D%20push%28ref%28db%2C%20%22rooms%22%29%29%3B%0A%20%20%20%20%20%20roomCode%20%3D%20newRoomRef.key%3B%0A%20%20%20%20%20%20alert%28%60%u90E8%u5C4B%u3092%u4F5C%u6210%u3057%u307E%u3057%u305F%uFF01%u30B3%u30FC%u30C9%3A%20%24%7BroomCode%7D%60%29%3B%0A%20%20%20%20%20%20document.getElementById%28%22room-code%22%29.value%20%3D%20roomCode%3B%0A%20%20%20%20%20%20loadRoom%28%29%3B%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20function%20loadRoom%28%29%20%7B%0A%20%20%20%20%20%20const%20tableRef%20%3D%20ref%28db%2C%20%60rooms/%24%7BroomCode%7D%60%29%3B%0A%20%20%20%20%20%20onValue%28tableRef%2C%20snapshot%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20data%20%3D%20snapshot.val%28%29%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20renderTable%28data%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20renderTable%28data%29%20%7B%0A%20%20%20%20%20%20const%20table%20%3D%20document.getElementById%28%22mission-table%22%29%3B%0A%20%20%20%20%20%20table.innerHTML%20%3D%20%22%22%3B%0A%20%20%20%20%20%20const%20missions%20%3D%20data.missions%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20const%20teams%20%3D%20data.teams%20%7C%7C%20%5B%5D%3B%0A%0A%20%20%20%20%20%20const%20thead%20%3D%20document.createElement%28%22thead%22%29%3B%0A%20%20%20%20%20%20const%20headRow%20%3D%20document.createElement%28%22tr%22%29%3B%0A%20%20%20%20%20%20headRow.innerHTML%20%3D%20%60%3Cth%3E%u30C1%u30FC%u30E0%5C%5C%u30DF%u30C3%u30B7%u30E7%u30F3%3C/th%3E%60%20+%20missions.map%28m%20%3D%3E%20%60%3Cth%3E%24%7Bm%7D%3C/th%3E%60%29.join%28%22%22%29%3B%0A%20%20%20%20%20%20thead.appendChild%28headRow%29%3B%0A%20%20%20%20%20%20table.appendChild%28thead%29%3B%0A%0A%20%20%20%20%20%20const%20tbody%20%3D%20document.createElement%28%22tbody%22%29%3B%0A%20%20%20%20%20%20teams.forEach%28%28team%2C%20i%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20row%20%3D%20document.createElement%28%22tr%22%29%3B%0A%20%20%20%20%20%20%20%20row.innerHTML%20%3D%20%60%3Cth%3E%24%7Bteam%7D%3C/th%3E%60%20+%20missions.map%28%28m%2C%20j%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20value%20%3D%20%28data.progress%20%26%26%20data.progress%5Bi%5D%20%26%26%20data.progress%5Bi%5D%5Bj%5D%29%20%7C%7C%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20return%20%60%3Ctd%3E%3Cinput%20data-i%3D%22%24%7Bi%7D%22%20data-j%3D%22%24%7Bj%7D%22%20value%3D%22%24%7Bvalue%7D%22%20%24%7BgmCheck.checked%20%3F%20%22%22%20%3A%20%22disabled%22%7D%20/%3E%3C/td%3E%60%3B%0A%20%20%20%20%20%20%20%20%7D%29.join%28%22%22%29%3B%0A%20%20%20%20%20%20%20%20tbody.appendChild%28row%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20table.appendChild%28tbody%29%3B%0A%0A%20%20%20%20%20%20table.querySelectorAll%28%22input%22%29.forEach%28input%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20input.addEventListener%28%22change%22%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21gmCheck.checked%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20const%20i%20%3D%20input.dataset.i%3B%0A%20%20%20%20%20%20%20%20%20%20const%20j%20%3D%20input.dataset.j%3B%0A%20%20%20%20%20%20%20%20%20%20const%20val%20%3D%20input.value%3B%0A%20%20%20%20%20%20%20%20%20%20const%20progRef%20%3D%20ref%28db%2C%20%60rooms/%24%7BroomCode%7D/progress/%24%7Bi%7D/%24%7Bj%7D%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20set%28progRef%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gmCheck.addEventListener%28%22change%22%2C%20%28%29%20%3D%3E%20loadRoom%28%29%29%3B%0A%0A%20%20%20%20document.getElementById%28%22mission-form%22%29.addEventListener%28%22submit%22%2C%20e%20%3D%3E%20%7B%0A%20%20%20%20%20%20e.preventDefault%28%29%3B%0A%20%20%20%20%20%20const%20missions%20%3D%20document.getElementById%28%22missions%22%29.value.split%28%22%5Cn%22%29.map%28s%20%3D%3E%20s.trim%28%29%29.filter%28s%20%3D%3E%20s%29%3B%0A%20%20%20%20%20%20const%20teams%20%3D%20document.getElementById%28%22teams%22%29.value.split%28%22%5Cn%22%29.map%28s%20%3D%3E%20s.trim%28%29%29.filter%28s%20%3D%3E%20s%29%3B%0A%20%20%20%20%20%20const%20roomRef%20%3D%20ref%28db%2C%20%60rooms/%24%7BroomCode%7D%60%29%3B%0A%20%20%20%20%20%20set%28roomRef%2C%20%7B%20missions%2C%20teams%2C%20progress%3A%20Array%28teams.length%29.fill%28%29.map%28%28%29%20%3D%3E%20Array%28missions.length%29.fill%28%22%22%29%29%20%7D%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%3C/script%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%3Cheader%3E%0A%20%20%20%20%3Ch1%3E%u30DF%u30C3%u30B7%u30E7%u30F3%u9054%u6210%u8868%3C/h1%3E%0A%20%20%3C/header%3E%0A%20%20%3Cform%20id%3D%22create-room-form%22%3E%0A%20%20%20%20%3Cbutton%20type%3D%22submit%22%3E%uD83D%uDD11%20%u65B0%u3057%u3044%u90E8%u5C4B%u3092%u4F5C%u6210%3C/button%3E%0A%20%20%3C/form%3E%0A%20%20%3Cform%20id%3D%22room-form%22%3E%0A%20%20%20%20%3Clabel%3E%u90E8%u5C4B%u30B3%u30FC%u30C9%3A%20%3Cinput%20id%3D%22room-code%22%20required%20/%3E%3C/label%3E%0A%20%20%20%20%3Cbutton%20type%3D%22submit%22%3E%u5165%u5BA4%3C/button%3E%0A%20%20%3C/form%3E%0A%20%20%3Cdiv%20id%3D%22gm-check%22%3E%0A%20%20%20%20%3Clabel%3E%3Cinput%20type%3D%22checkbox%22%20id%3D%22gm-checkbox%22%20/%3E%20%u30B2%u30FC%u30E0%u30DE%u30B9%u30BF%u30FC%u3067%u3059%3C/label%3E%0A%20%20%3C/div%3E%0A%20%20%3Cform%20id%3D%22mission-form%22%3E%0A%20%20%20%20%3Clabel%3E%u30DF%u30C3%u30B7%u30E7%u30F3%uFF08%u6539%u884C%u3067%u8907%u6570%u5165%u529B%uFF09%3A%3Cbr%3E%3Ctextarea%20id%3D%22missions%22%20rows%3D%224%22%3E%3C/textarea%3E%3C/label%3E%3Cbr%20/%3E%0A%20%20%20%20%3Clabel%3E%u30C1%u30FC%u30E0%u540D%uFF08%u6539%u884C%u3067%u8907%u6570%u5165%u529B%uFF09%3A%3Cbr%3E%3Ctextarea%20id%3D%22teams%22%20rows%3D%224%22%3E%3C/textarea%3E%3C/label%3E%3Cbr%20/%3E%0A%20%20%20%20%3Cbutton%20type%3D%22submit%22%3E%u8A2D%u5B9A%3C/button%3E%0A%20%20%3C/form%3E%0A%20%20%3Ctable%20id%3D%22mission-table%22%3E%3C/table%3E%0A%3C/body%3E%0A%3C/html%3E'))</script>
